processor 16f877
#include <p16f877.inc>

DATO1   equ h'20'
DATO2   equ h'21'
DATO3   equ h'22'
CTE1    equ 01h
CTE2    equ 30h
CTE3    equ 60h

ORG 0
    GOTO INICIO

ORG 5
INICIO:
    CLRF PORTE
    BSF STATUS, RP0
    BCF STATUS, RP1
    CLRF TRISD
    MOVLW 0xFF
    CLRF ADCON1
    BCF STATUS, RP0
    MOVLW B'00101001'
    MOVWF ADCON0
    CALL RETARDO

CICLO_PRINCIPAL:
    BSF ADCON0, GO
    CALL RETARDO

ESPERANDO_CONVERSION:
    BTFSC ADCON0, GO
    GOTO ESPERANDO_CONVERSION

    MOVF ADRESH, W
    SUBLW 0x2A
    BTFSS STATUS, C
    GOTO CASO2

CASO1:
    MOVLW 0x00
    MOVWF PORTD
    GOTO CICLO_PRINCIPAL

CASO2:
    MOVF ADRESH, W
    SUBLW 0x54
    BTFSS STATUS, C
    GOTO CASO4

CASO3:
    MOVLW 0x01
    MOVWF PORTD
    GOTO CICLO_PRINCIPAL

CASO4:
    MOVF ADRESH, W
    SUBLW 0x7E
    BTFSS STATUS, C
    GOTO CASO6

CASO5:
    MOVLW 0x02
    MOVWF PORTD
    GOTO CICLO_PRINCIPAL

CASO6:
    MOVF ADRESH, W
    SUBLW 0xA8
    BTFSS STATUS, C
    GOTO CASO8

CASO7:
    MOVLW 0x03
    MOVWF PORTD
    GOTO CICLO_PRINCIPAL

CASO8:
    MOVF ADRESH, W
    SUBLW 0xD2
    BTFSS STATUS, C
    GOTO CASO10

CASO9:
    MOVLW 0x04
    MOVWF PORTD
    GOTO CICLO_PRINCIPAL

CASO10:
    MOVF ADRESH, W
    SUBLW 0xFF
    BTFSS STATUS, C
    GOTO CICLO_PRINCIPAL

    MOVLW 0x05
    MOVWF PORTD
    GOTO CICLO_PRINCIPAL

RETARDO:
    MOVLW CTE1
    MOVWF DATO1

ETIQUETA3:
    MOVLW CTE2
    MOVWF DATO2

ETIQUETA2:
    MOVLW CTE3
    MOVWF DATO3

ETIQUETA1:
    DECFSZ DATO3
    GOTO ETIQUETA1
    DECFSZ DATO2
    GOTO ETIQUETA2
    DECFSZ DATO1
    GOTO ETIQUETA3

    RETURN

END
